<!DOCTYPE html>
<html>
<head>
	<title>SFIA Skills (CSV)</title>
	<%- include('_styles') %>
</head>
<body>
	<div class="page">
		<%- include('_nav') %>

		<section class="hero">
			<h1>SFIA Skills (CSV)</h1>
			<p>Browse SFIA skills from the imported CSV. Click a level cell to view the description for that level. Red badges indicate an AI-generated description overlay.</p>
		</section>

		<section class="card">
			<div class="card__body table-wrap">
				<table>
					<thead>
						<tr>
							<th>Code</th>
							<th>Skill</th>
							<th>Category</th>
							<th>Subcategory</th>
							<% for (let level = 1; level <= 7; level++) { %>
								<th>Level <%= level %></th>
							<% } %>
						</tr>
					</thead>
					<tbody>
						<% (sfiaCSV || []).forEach(row => { %>
							<tr>
								<td><span class="badge"><%= row.Code %></span></td>
								<td><%= row.Skill %></td>
								<td><%= row.Category %></td>
								<td><%= row.Subcategory %></td>
								<% for (let level = 1; level <= 7; level++) { %>
									<td>
										<% const isAi = row && row.__ai && row.__ai[String(level)] %>
										<a href="/sfia/<%= row.Code %>/level/<%= level %>">
											<span class="badge <%= isAi ? 'badge--ai' : 'badge--ok' %>" <% if (isAi) { %>title="AI-generated description"<% } %>>
												<%= row['Level ' + level] || '' %>
											</span>
										</a>
									</td>
								<% } %>
							</tr>
						<% }) %>
					</tbody>
				</table>
			</div>
		</section>

		<%- include('_footer') %>
	</div>
</body>
</html>
